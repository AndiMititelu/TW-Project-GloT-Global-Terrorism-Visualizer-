<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script src="https://www.gstatic.com/charts/loader.js"></script>
        <title>TerroristTracker</title>
        <link rel="stylesheet" href="/static/styles.css">
        <link rel="stylesheet" href="/static/statistics/filtered-search.css">
        <link rel="stylesheet" href="/static/statistics/filters.css">
        <link rel="stylesheet" href="/static/statistics/filters2.css">
        <link rel="stylesheet" href="/static/statistics/chart.css">
        <link rel="stylesheet" href="/static/homepage/home.css">
        <link rel="icon" type="image/x-icon" href="/static/images/favicon.ico">
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="">
        <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
        <script src='https://unpkg.com/leaflet-image@0.4.0/leaflet-image.js'></script>
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    </head>

    <body>
        <header>
            <div class="logo">Terrorism Visualizer</div>
            <div class="hamburger">
                <div class="line"></div>
                <div class="line"></div>
                <div class="line"></div>
            </div>
            <nav class="nav-bar">
                <ul>
                    <li>
                        <a href="#home" class="active">Home</a>
                    </li>
                    <li>
                        <a href="#news">News</a>
                    </li>
                    <li>
                        <a href="#stat">Statistics</a>
                    </li>
                    <li>
                        <a href="#mapping">Map</a>
                    </li>
                    <li>
                        <a href="/login.html">Log-out</a>
                    </li>
                </ul>
            </nav>
        </header>

        <div class="vertical-container">

            <div class="section home" id="home">
                <div class="home-text">
                    <p class = "p1">Terrorism, in its broadest sense, is the use of intentional violence
                        and fear to achieve political or ideological aims.
                        The term is used in this regard primarily to refer to
                        intentional violence during peacetime or in the context of
                        war against non-combatants (mostly civilians and
                        neutral military personnel)</p>
                </div>
            </div>

            <div class="section" id="news">
                <div class="section-header">Last News </div>
                <div class="slideshow-container">
                    <!-- Full-width images with number and caption text -->
                    <div class="mySlides fade">
                        <div class="numbertext">1 / 3</div>
                        <img class = "image" src="/static/images/img1.jpeg" style="width:100%" alt="..." loading="lazy">
                        <a href="https://news.sky.com/story/man-arrested-in-germany-on-suspicion-of-procuring-cyanide-and-ricin-for-islamist-motivated-attack-12782428" target="_blank">
                            <div class="text">
                                Man arrested in Germany on suspicion of procuring cyanide and ricin for 'Islamist-motivated' attack
                            </div>
                        </a>
                    </div>
                    <div class="mySlides fade">
                        <div class="numbertext">2 / 3</div>
                        <img class = "image" src="/static/images/img2.jpeg" style="width:100%" alt="..." loading="lazy">
                        <a href="https://www.usnews.com/news/world/articles/2023-03-28/2-dead-in-portugal-stabbing-at-muslim-center" target="_blank">
                            <div class="text">
                                Portugal: Refugee Held as Suspect in Muslim Center Stabbings
                            </div>
                        </a>
                    </div>
                    <div class="mySlides fade">
                        <div class="numbertext">3 / 3</div>
                        <img class = "image" src="/static/images/img3.jpg" style="width:100%" alt="..." loading="lazy">
                        <a href="https://www.independent.co.uk/news/uk/home-news/iran-irgc-terrorist-group-uk-b2260184.html" target="_blank">
                            <div class="text">
                                Declaring Iran’s IRGC a terrorist group would destabilise UK’s definition of terrorism, Suella Braverman warned
                            </div>
                        </a>
                    </div>
                    <!-- Next and previous buttons -->
                    <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
                    <a class="next" onclick="plusSlides(1)">&#10095;</a>
                </div>
                <br>
                <!-- The dots/circles -->
                <div style="text-align:center">
                    <span class="dot" onclick="currentSlide(1)"></span>
                    <span class="dot" onclick="currentSlide(2)"></span>
                    <span class="dot" onclick="currentSlide(3)"></span>
                </div>
            </div>

            <div class="section" id="stat">
                <div class="section-header">Statistics </div>
                <br>
                <div class="horizontal-container">
                    <form class="form" id="formId">
                        <label for="region">Select Region: </label>
                        <br>
                        <select id="region">
                            <option value="1">Select region:</option>
                            {{regionsOptions}}
                          </select>
                        <br>
                        <label for="attack-type">Select Attack Type: </label>
                        <br>
                        <select id="attack-type">
                            <option value="1">Select attack type:</option>
                            {{weaponTypesOptions}}
                          </select>
                        <br>
                        <label for="main-target">Select Main Target: </label>
                        <br>
                        <select id="main-target">
                            <option value="1">Select target:</option>
                            {{targetsOptions}}
                          </select>
                        <br>
                        <label for="main-nationality">Select Main Nationality: </label>
                        <select id="main-nationality">
                            <option value="1">Target nationality:</option>
                            {{nationalitiesOptions}}
                          </select>
                        <br>
                        <label for="main-weapon">Select Main Weapon: </label>
                        <br>
                        <select id="main-weapon" name="main-weapon">
                            <option value="1">Select main weapon:</option>
                            {{weaponsOptions}}
                          </select>
                        <br>
                        <label for="chart">Select-Chart: </label>
                        <br>
                        <select id="chart">
                            <option value="1">Chart Type: </option>
                            <option value="2">Pie Chart</option>
                            <option value="3">Bar Chart</option>
                            <option value="4">Line Chart</option>
                            <option value="5">Scatter Chart</option>
                        </select>
                        <input type="button" value="Analyze" id="generate-chart">
                    </form>
                    
                    <div class="chart">
                        <div id="myPieChart"></div>
                        <div id="myBarChart"></div>
                    </div>
                </div>
                <button class="export-button-stats" onclick="openPopupStats()">Export</button>
                    <div id="popup-stats" class="popup-stats" style="display: none;">
                        <button class = "popup-button-stats" onclick="downloadChartAsCsv()">
                            <img src="static/images/csv.png" alt="Icon 1" loading="lazy">
                        </button>
                        <button class = "popup-button-stats" onclick="downloadChartAsPng()">
                            <img src="static/images/png.png" alt="Icon 2" loading="lazy">
                        </button>
                        <button class = "popup-button-stats" onclick="downloadChartAsSvg()">
                            <img src="static/images/svg.png" alt="Icon 3" loading="lazy">
                        </button>
                    </div>
            </div>

            <div class="section map-bg" id="mapping">
                <div class="section-header">Map Visualizer</div>
                <br>
                <div class="horizontal-container">
                    <form id = "mapForm" action="/api/map" class="form" method = "GET">
                        <label for="interval">From:</label>
                        <input type="date" id="from" name="interval">
                        <br>
                        <label for="interval">Until:</label>
                        <input type="date" id="until" name="interval">
                        <br>
                        <label for="organization">Organization Name:</label>
                        <select id="Organization" name="Organization">
                        </select>
                        <br>
                        <input type="submit" value="Analyze">
                    </form>
                    <div id="map"></div>
                    <button class="export-button" onclick="openPopup()">Export</button>
                        <div id="popup" class="popup" style="display: none;">
                            <button class = "popup-button" onclick="downloadMapAsCsv()">
                                <img src="static/images/csv.png" alt="Icon 1" loading="lazy">
                            </button>
                            <button class = "popup-button" onclick="downloadMapAsPng()">
                                <img src="static/images/png.png" alt="Icon 2" loading="lazy">
                            </button>
                        </div>
                </div>
             </div>
             <div class="horizontal-container map-bg">
                <div class = "vertical-container" id="marker-details" style="display: none;"></div>
                <div id="map-chart"></div>
            </div>
            <!-- ! Div-ul asta va fi livrat de server la momentul incarcarii paginii, daca user-ul e admin !-->
            <div class=section id = "admin">
                <script src="/static/admin.js"></script>
                <div class="section-header"> Administration </div>
                <div class="horizontal-container-admin">
                    <button class="get-users" onclick="fetchUsers()">Get users</button>
                    <button class="get-sessions" onclick="fetchSessions()">Get sessions</button>
                    <button class="add-user" onclick="addUser()">Add user</button> <!-- asta ar trebui sa deschida un formular, iar butonul formularului sa apeleze functia-->
                </div>
            </div>
            <!-- ! ------ ------  -------  -------  -------  -------  -------  -------  -------  ------- -- !-->

        </div>
        <button onclick="topFunction()" id="myBtn" title="Go to top">
            <span>&#8686;</span>
        </button>

        <script src="/static/scrollTopButton.js"> </script>
        <script src="/static/statistics/filter.js"> </script>
        <script src="/static/animate.js"> </script>
        <script src="/static/route.js"></script>
        <script src="/static/export.js"></script>
        <script src="/static/fetchFilters.js"></script>
        <script src="/static/mapChart.js"></script>

        <!-- Script pentru nav-bar cand max-width = 900px -->
        <script>
              hamburger = document.querySelector(".hamburger");
              hamburger.onclick = function() {
                navbar = document.querySelector(".nav-bar");
                navbar.classList.toggle("active");
              }
        </script>

        <!-- Script pentru pop-up export -->
        <script>
            function openPopup() {
                var popup = document.getElementById('popup');
                if (popup.style.display === "none") {
                    popup.style.display = "flex";
                }
                else popup.style.display = "none";
            }
        </script>

        <script>
            function openPopupStats() {
                var popup = document.getElementById('popup-stats');
                if (popup.style.display === 'none') {
                    popup.style.display = 'flex';
                }
                else popup.style.display = 'none';
            }
        </script>

        <!--Script pentru fade scroll-->
        <script>
            function updateBackgroundOpacity() {
                const background = document.querySelector('.home');
                const scrollPos = window.scrollY || window.pageYOffset;
                const elementHeight = background.offsetHeight;
                
                const opacity = 1 - (scrollPos / elementHeight);
                background.style.opacity = opacity;
            }
            window.addEventListener('scroll', updateBackgroundOpacity);
        </script>

    </body>
</html>
